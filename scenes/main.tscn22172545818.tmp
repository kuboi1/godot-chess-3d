[gd_scene load_steps=11 format=3 uid="uid://d1uudo8essa02"]

[ext_resource type="PackedScene" uid="uid://btdpfqmj8sw0b" path="res://scenes/Chess/Controller/chess_controller.tscn" id="1_sugp2"]
[ext_resource type="Script" uid="uid://cux7epnc60bt0" path="res://scenes/main.gd" id="1_tipki"]
[ext_resource type="PackedScene" uid="uid://cyepik78pv6n7" path="res://scenes/Chess/Services/StartingPositionGenerator/chess_starting_position_generator.tscn" id="2_0wfyh"]
[ext_resource type="PackedScene" uid="uid://byuwk3fja2tuu" path="res://scenes/Chess/SignalBus/chess_signal_bus.tscn" id="2_choun"]
[ext_resource type="PackedScene" uid="uid://bkwb75dd6wti4" path="res://scenes/Chess/Opponent/Component/chess_opponent_component.tscn" id="3_sugp2"]
[ext_resource type="Script" uid="uid://nffv22vwjr10" path="res://scenes/Chess/Opponent/Component/Opening/chess_opening.gd" id="4_tbgi4"]
[ext_resource type="Resource" uid="uid://c8j6shnte2tja" path="res://scenes/Chess/Opponent/Component/Opening/Openings/queens_gambit_opening.tres" id="5_tefeu"]
[ext_resource type="Resource" uid="uid://bh8kv2jmr5xpa" path="res://scenes/Chess/Opponent/Component/Opening/Openings/kings_indian_attack_opening.tres" id="6_tefeu"]
[ext_resource type="Resource" uid="uid://c1mwv3h8qyapa" path="res://scenes/Chess/Opponent/Component/Opening/Openings/kings_indian_defense.tres" id="7_o6xl0"]
[ext_resource type="PackedScene" uid="uid://cssuc6egkc2l5" path="res://scenes/UI/PromotionButton/promotion_button.tscn" id="9_85g3d"]

[node name="Main" type="Node3D"]
script = ExtResource("1_tipki")

[node name="ChessSignalBus" parent="." instance=ExtResource("2_choun")]

[node name="ChessController" parent="." node_paths=PackedStringArray("starting_position_generator", "chess_opponent", "chess_signal_bus") instance=ExtResource("1_sugp2")]
game_type = 0
starting_position_generator = NodePath("ChessStartingPositionGenerator")
chess_opponent = NodePath("ChessOpponentComponent")
chess_signal_bus = NodePath("../ChessSignalBus")

[node name="ChessStartingPositionGenerator" parent="ChessController" instance=ExtResource("2_0wfyh")]
use_position = 1
_fen_notation_position = "4k3/1P6/8/8/8/8/8/4K3"

[node name="ChessOpponentComponent" parent="ChessController" instance=ExtResource("3_sugp2")]
player_name = "Gustavo"
skill_level = 0
think_time_ms = 100
search_depth = 10
candidate_moves = 10
move_randomness = 1.5
mate_vision = 1
_openings = Array[ExtResource("4_tbgi4")]([ExtResource("5_tefeu"), ExtResource("6_tefeu"), ExtResource("7_o6xl0")])

[node name="SpotLight3D" type="SpotLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.022792, 0.99974, 0, -0.99974, 0.022792, 0, 9.10203, 0)
light_energy = 16.0
spot_range = 16.0
spot_angle = 60.0

[node name="UI" type="CanvasLayer" parent="."]

[node name="PromotionSelect" type="HBoxContainer" parent="UI"]
visible = false
offset_left = 24.0
offset_top = 672.0
offset_right = 389.0
offset_bottom = 703.0

[node name="Label" type="Label" parent="UI/PromotionSelect"]
layout_mode = 2
text = "Promote to: "

[node name="QueenButton" parent="UI/PromotionSelect" instance=ExtResource("9_85g3d")]
layout_mode = 2
text = "QUEEN"

[node name="RookButton" parent="UI/PromotionSelect" instance=ExtResource("9_85g3d")]
layout_mode = 2
text = "ROOK"
piece_type = 2

[node name="BishopButton" parent="UI/PromotionSelect" instance=ExtResource("9_85g3d")]
layout_mode = 2
text = "BISHOP"
piece_type = 4

[node name="KnightButton" parent="UI/PromotionSelect" instance=ExtResource("9_85g3d")]
layout_mode = 2
text = "KNIGHT"
piece_type = 3

[connection signal="promote" from="UI/PromotionSelect/QueenButton" to="." method="_on_promotion_button_promote"]
[connection signal="promote" from="UI/PromotionSelect/RookButton" to="." method="_on_promotion_button_promote"]
[connection signal="promote" from="UI/PromotionSelect/BishopButton" to="." method="_on_promotion_button_promote"]
[connection signal="promote" from="UI/PromotionSelect/KnightButton" to="." method="_on_promotion_button_promote"]
